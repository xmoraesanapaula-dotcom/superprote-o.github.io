<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Documento ‚Ä¢ Super Prote√ß√£o v1.7.0</title>

  <!-- Tema inicial -->
  <script>
    (function () {
      try {
        var theme = localStorage.getItem('theme');
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        }
      } catch (e) { console.error("Erro ao aplicar o tema inicial:", e); }
    })();
  </script>

  <!-- Fonts e Tailwind -->
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üõ°Ô∏è</text></svg>">
</head>

<body class="bg-[var(--background-primary)] text-[var(--text-primary)] transition-colors duration-500" style="font-family: Inter, sans-serif;">
  <div id="error-toast" class="error-toast"></div>

  <!-- Header -->
  <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-[var(--secondary-color)] px-4 md:px-10 py-3 bg-[var(--background-primary)]">
    <div class="flex items-center gap-8">
      <a href="index.html" class="flex items-center gap-3 text-[var(--text-primary)]">
        <span class="material-symbols-outlined text-blue-600" style="font-size: 32px;">security</span>
        <h1 class="text-xl font-bold">Super Prote√ß√£o</h1>
      </a>
      <span class="hidden sm:inline text-sm text-[var(--text-secondary)]">Documenta√ß√£o</span>
    </div>

    <div class="flex items-center gap-4">
      <div class="relative hidden sm:block">
        <span class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">search</span>
        <a href="busca.html" class="block w-full">
          <input
            class="w-full rounded-md border-gray-300 dark:border-gray-600 bg-[var(--background-secondary)] pl-10 pr-4 py-2 text-sm focus:border-blue-500 focus:ring-blue-500 cursor-pointer"
            placeholder="Buscar na documenta√ß√£o..." type="text" onfocus="window.location.href='busca.html';"/>
        </a>
      </div>

      <button class="rounded-full" id="theme-toggle" title="Alternar tema">
        <span class="sr-only">Toggle theme</span>
        <span class="material-symbols-outlined text-[var(--text-primary)]">dark_mode</span>
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6 md:py-10">
    <!-- Breadcrumb simples -->
    <nav class="mb-6 text-sm text-[var(--text-secondary)]">
      <a href="index.html" class="hover:underline">In√≠cio</a>
      <span class="mx-2">/</span>
      <span id="breadcrumb-pagina">Documento</span>
    </nav>

    <div class="grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-8">
      <!-- Sidebar ToC -->
      <aside class="lg:sticky lg:top-6 lg:h-[calc(100vh-6rem)] lg:overflow-y-auto border border-[var(--secondary-color)] rounded-lg p-4 bg-[var(--background-primary)]">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-base font-semibold">Sum√°rio</h2>
          <button id="collapse-toc" class="text-xs px-2 py-1 border rounded hover:bg-[var(--background-secondary)]">
            recolher
          </button>
        </div>
        <nav id="toc-container" class="space-y-2 text-sm">
          <!-- Navega√ß√£o gerada dinamicamente pelo doc-loader.js -->
          <p class="text-[var(--text-secondary)]">Carregando sum√°rio...</p>
        </nav>

        <hr class="my-4 border-[var(--secondary-color)]">
        <div class="space-y-2">
          <h3 class="text-xs font-semibold tracking-wide uppercase text-[var(--text-secondary)]">Ferramentas</h3>
          <button id="scroll-top" class="w-full text-left text-sm px-3 py-2 border rounded hover:bg-[var(--background-secondary)]">
            ‚Üë Voltar ao topo
          </button>
          <button id="expand-all" class="w-full text-left text-sm px-3 py-2 border rounded hover:bg-[var(--background-secondary)]">
            ‚ûï Expandir todas
          </button>
          <button id="collapse-all" class="w-full text-left text-sm px-3 py-2 border rounded hover:bg-[var(--background-secondary)]">
            ‚ûñ Recolher todas
          </button>
        </div>
      </aside>

      <!-- Conte√∫do do Markdown -->
      <section>
        <article id="markdown-content" class="prose max-w-none">
          <!-- Conte√∫do gerado dinamicamente pelo doc-loader.js -->
          <div class="text-[var(--text-secondary)]">Carregando conte√∫do‚Ä¶</div>
        </article>

        <!-- Navega√ß√£o entre documentos -->
        <div class="mt-10 pt-6 border-t border-[var(--secondary-color)] flex flex-col md:flex-row gap-4 justify-between">
          <a id="prev-link" href="#" class="inline-flex items-center gap-2 text-blue-600 hover:underline disabled:opacity-50">
            <span class="material-symbols-outlined">arrow_back</span>
            <span>Anterior</span>
          </a>
          <a id="next-link" href="#" class="inline-flex items-center gap-2 text-blue-600 hover:underline disabled:opacity-50">
            <span>Pr√≥ximo</span>
            <span class="material-symbols-outlined">arrow_forward</span>
          </a>
        </div>
      </section>
    </div>
  </main>

  <!-- Footer -->
  <footer class="border-t border-[var(--secondary-color)] bg-[var(--background-primary)]">
    <div class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8 text-center text-sm text-[var(--text-secondary)]">
      <span id="version-info">v1.7.0</span> ‚Ä¢ Documenta√ß√£o Super Prote√ß√£o
    </div>
  </footer>

  <!-- Scripts -->
  <script src="main.js"></script>
  <script src="doc-loader.js"></script>
  <script src="dev-panel.js"></script>
  <script src="tester.js"></script>

  <!-- Helpers espec√≠ficos desta p√°gina -->
  <script>
    // Atualiza breadcrumb com o nome da p√°gina (?pagina=xyz)
    (function () {
      const params = new URLSearchParams(location.search);
      const pagina = (params.get('pagina') || '').trim();
      if (pagina) {
        const mapNomes = {
          introducao: 'Introdu√ß√£o',
          alertas: 'Alertas',
          relatorios: 'Relat√≥rios'
        };
        const nome = mapNomes[pagina] || pagina.charAt(0).toUpperCase() + pagina.slice(1);
        const bc = document.getElementById('breadcrumb-pagina');
        if (bc) bc.textContent = nome;
      }
    })();

    // Ferramentas ToC locais (expandir/recolher/scroll)
    (function () {
      const toc = document.getElementById('toc-container');
      const btnCollapseToc = document.getElementById('collapse-toc');
      const btnTop = document.getElementById('scroll-top');
      const btnExpand = document.getElementById('expand-all');
      const btnCollapse = document.getElementById('collapse-all');

      if (btnTop) btnTop.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

      // Esses bot√µes atuam sobre √¢ncoras/itens gerados pelo doc-loader.js.
      if (btnExpand) btnExpand.addEventListener('click', () => {
        toc?.querySelectorAll('details').forEach(d => d.open = true);
      });
      if (btnCollapse) btnCollapse.addEventListener('click', () => {
        toc?.querySelectorAll('details').forEach(d => d.open = false);
      });

      // Recolher/Mostrar o bloco inteiro do TOC
      if (btnCollapseToc && toc) {
        let collapsed = false;
        btnCollapseToc.addEventListener('click', () => {
          collapsed = !collapsed;
          toc.style.display = collapsed ? 'none' : '';
          btnCollapseToc.textContent = collapsed ? 'mostrar' : 'recolher';
        });
      }
    })();

    // Navega√ß√£o Anterior/Pr√≥ximo simples entre os docs principais
    (function () {
      const ordem = ['introducao', 'alertas', 'relatorios'];
      const params = new URLSearchParams(location.search);
      const atual = params.get('pagina') || 'introducao';
      const idx = Math.max(0, ordem.indexOf(atual));

      const prev = document.getElementById('prev-link');
      const next = document.getElementById('next-link');

      // Prev
      if (idx > 0) {
        const p = ordem[idx - 1];
        prev.href = `documento.html?pagina=${p}`;
      } else {
        prev.classList.add('pointer-events-none', 'opacity-50');
        prev.href = '#';
      }

      // Next
      if (idx < ordem.length - 1) {
        const n = ordem[idx + 1];
        next.href = `documento.html?pagina=${n}`;
      } else {
        next.classList.add('pointer-events-none', 'opacity-50');
        next.href = '#';
      }
    })();
  </script>
</body>
</html>
